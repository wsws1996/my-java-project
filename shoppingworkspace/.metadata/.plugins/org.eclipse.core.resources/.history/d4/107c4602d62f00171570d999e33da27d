package com.shopping.service.impl;

import org.apache.commons.lang3.StringUtils;
import org.springframework.beans.factory.annotation.Value;

import com.shopping.pojo.ShoppingResult;
import com.shopping.pojo.TbItem;
import com.shopping.service.ItemService;
import com.shopping.utils.HttpClientUtil;

public class ItemServiceImpl implements ItemService {

	@Value("${REST_BASE_URL}")
	private String REST_BASE_URL;

	@Value("${ITEM_INFO_URL}")
	private String ITEM_INFO_URL;

	@Value("${ITEM_DESC_URL}")
	private String ITEM_DESC_URL;
	
	@Value("${ITEM_INFO_URL}")
	private String ITEM_INFO_URL;
	
	@Override
	public TbItem getItemById(Long itemId) {

		try {
			String json = HttpClientUtil.doGet(REST_BASE_URL + ITEM_INFO_URL + itemId);
			if (StringUtils.isBlank(json)) {
				ShoppingResult shoppingResult = ShoppingResult.formatToPojo(json, TbItem.class);
				if (shoppingResult.getStatus() == 200) {
					TbItem item = (TbItem) shoppingResult.getData();
					return item;
				}
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}

	@Override
	public String getItemDescById(Long itemId) {
		try {
			String json=HttpClientUtil.doGet(REST_BASE_URL+ITEM_D_URL+itemId);
			
		} catch (Exception e) {
			e.printStackTrace();
		}
		return null;
	}

}
